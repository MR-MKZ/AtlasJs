{"version":3,"file":"index.esm.js","sources":["../src/AtlasError.js","../src/extension.js","../src/index.js"],"sourcesContent":["class AtlasError extends Error {\r\n  constructor(message, type, tips, data) {\r\n    super(message);\r\n\r\n    this.name = \"AtlasError -> \" + type\r\n    if (tips) {\r\n      this.tips = tips\r\n    }\r\n    if (data) {\r\n      this.data = data\r\n    }\r\n  }\r\n}\r\n\r\nexport function raiseError(message, type, tips, data) {\r\n  throw new AtlasError(message, type, tips, data)\r\n}","import axios from \"axios\";\r\nimport {promises as fsPromises} from \"fs\";\r\nimport {raiseError} from \"./AtlasError.js\";\r\n\r\nexport function sendRequest(url, data = \"{}\", method = \"get\", headers = {}) {\r\n    let config = {\r\n        method: method,\r\n        maxBodyLength: Infinity,\r\n        url: url,\r\n        headers: headers,\r\n        data: data,\r\n    };\r\n\r\n    return axios\r\n        .request(config)\r\n        .then((response) => {\r\n            return response.data;\r\n        })\r\n        .catch((error) => {\r\n            return {\r\n                error: true,\r\n                msg: error,\r\n            };\r\n        });\r\n}\r\n\r\nexport class AtlasFileReader {\r\n    constructor() {\r\n    }\r\n\r\n    async getRegions() {\r\n        const data = await fsPromises.readFile(\"./assets/regions.json\", \"utf8\");\r\n        return JSON.parse(data);\r\n    }\r\n\r\n    async getRegionByName(regName) {\r\n        if (isNaN(Number(regName))) {\r\n            const data = await fsPromises.readFile(\"./assets/regions.json\", \"utf8\");\r\n            for (const region of JSON.parse(data)) {\r\n                if (region.name.toLowerCase() === regName.toLowerCase()) {\r\n                    return region;\r\n                }\r\n            }\r\n            raiseError(`region ${regName} not found`, \"RESULT_NOT_FOUND\");\r\n        } else {\r\n            raiseError(\"region name must be string\", \"INPUT_TYPE_ERR\")\r\n        }\r\n    }\r\n\r\n    async getSubRegion(regionId) {\r\n        let subregions = [];\r\n        const data = await fsPromises.readFile(\r\n            \"./assets/subregions.json\",\r\n            \"utf8\"\r\n        );\r\n        for (const subregion of JSON.parse(data)) {\r\n            if (subregion[\"region_id\"] == regionId) {\r\n                subregions.push(subregion);\r\n            }\r\n        }\r\n        if (subregions.length === 0) {\r\n            raiseError(`Subregion with region id ${regionId} not found`, \"RESULT_NOT_FOUND\")\r\n        } else {\r\n            return subregions;\r\n        }\r\n    }\r\n\r\n    async getCountries(\r\n        currency,\r\n        dialCode,\r\n        native,\r\n        nationality,\r\n        region,\r\n        subregion,\r\n        translations,\r\n        timezones,\r\n        geolocation,\r\n        emojies,\r\n        domain\r\n    ) {\r\n        let countries = [];\r\n        const data = await fsPromises.readFile(\r\n            \"./assets/countries_states_cities.json\",\r\n            \"utf8\"\r\n        );\r\n        for (const country of JSON.parse(data)) {\r\n            let countryObj = {};\r\n            countryObj[\"id\"] = country[\"id\"];\r\n            countryObj[\"name\"] = country[\"name\"];\r\n            countryObj[\"iso2\"] = country[\"iso2\"];\r\n            countryObj[\"iso3\"] = country[\"iso3\"];\r\n            countryObj[\"capital\"] = country[\"capital\"];\r\n            if (dialCode) countryObj[\"phone_code\"] = country[\"phone_code\"];\r\n            if (currency) {\r\n                countryObj[\"currency\"] = country[\"currency\"];\r\n                countryObj[\"currency_name\"] = country[\"currency_name\"];\r\n                countryObj[\"currency_symbol\"] = country[\"currency_symbol\"];\r\n            }\r\n            if (domain) countryObj[\"domain\"] = country[\"tld\"];\r\n            if (native) countryObj[\"native\"] = country[\"native\"];\r\n            if (nationality) countryObj[\"nationality\"] = country[\"nationality\"];\r\n            if (region) {\r\n                countryObj[\"region\"] = country[\"region\"];\r\n                countryObj[\"region_id\"] = country[\"region_id\"];\r\n            }\r\n            if (subregion) {\r\n                countryObj[\"subregion\"] = country[\"subregion\"];\r\n                countryObj[\"subregion_id\"] = country[\"subregion_id\"];\r\n            }\r\n            if (translations) countryObj[\"translations\"] = country[\"translations\"];\r\n\r\n            if (timezones) countryObj[\"timezones\"] = country[\"timezones\"];\r\n\r\n            if (geolocation) {\r\n                countryObj[\"latitude\"] = country[\"latitude\"];\r\n                countryObj[\"longitude\"] = country[\"longitude\"];\r\n            }\r\n\r\n            if (emojies) {\r\n                countryObj[\"emoji\"] = country[\"emoji\"];\r\n                countryObj[\"emojiU\"] = country[\"emojiU\"];\r\n            }\r\n            countries.push(countryObj);\r\n        }\r\n        return countries;\r\n    }\r\n\r\n    async getStates(countryName, iso3, iso2, geolocation) {\r\n        if (\r\n            (countryName !== undefined &&\r\n                countryName != null &&\r\n                isNaN(Number(countryName))) || (iso3 !== undefined && isNaN(Number(iso3))) || (iso2 !== undefined && isNaN(Number(iso2)))\r\n        ) {\r\n            let states = [];\r\n            const data = await fsPromises.readFile(\r\n                \"./assets/countries_states_cities.json\",\r\n                \"utf8\"\r\n            );\r\n            for (const country of JSON.parse(data)) {\r\n                if (\r\n                    (countryName !== undefined &&\r\n                        countryName != null &&\r\n                        country[\"name\"].toLowerCase() === countryName.toLowerCase()) || (iso3 !== undefined && country[\"iso3\"].toLowerCase() === iso3.toLowerCase()) || (iso2 !== undefined && country[\"iso2\"].toLowerCase() === iso2.toLowerCase())\r\n                ) {\r\n                    for (const state of country[\"states\"]) {\r\n                        let statesObj = {};\r\n                        statesObj[\"id\"] = state[\"id\"];\r\n                        statesObj[\"name\"] = state[\"name\"];\r\n                        statesObj[\"state_code\"] = state[\"state_code\"];\r\n                        if (geolocation) {\r\n                            statesObj[\"latitude\"] = state[\"latitude\"];\r\n                            statesObj[\"longitude\"] = state[\"longitude\"];\r\n                        }\r\n                        states.push(statesObj);\r\n                    }\r\n                }\r\n            }\r\n            if (states.length === 0) {\r\n                raiseError(`Country ${countryName} not found`, \"RESULT_NOT_FOUND\", {\r\n                    \"country_name\": \"check entered country name: \" + countryName,\r\n                    \"iso3\": \"check entered iso3: \" + iso3,\r\n                    \"iso2\": \"check entered iso2: \" + iso2\r\n                })\r\n            } else {\r\n                return states;\r\n            }\r\n        } else {\r\n            raiseError(\"region name must be string\", \"INPUT_TYPE_ERR\")\r\n        }\r\n    }\r\n}\r\n","import {AtlasFileReader} from \"./extension.js\";\r\nimport {raiseError} from \"./AtlasError.js\";\r\n\r\nconst atlasFileReader = new AtlasFileReader();\r\n\r\n/**\r\n * This function returns and object that contains list of all regions.\r\n *\r\n * @returns {Promise<object>} A Promise that resolves to an array of regions.\r\n */\r\nexport async function getAllRegions() {\r\n    return await atlasFileReader.getRegions();\r\n}\r\n\r\n/**\r\n * This function return subregions of a region.\r\n *\r\n * @param {string} region region name to get subregions.\r\n * @returns {Promise<object>} A Promise that resolves to an array of subregions of entered region.\r\n */\r\nexport async function getSubRegions(region) {\r\n    if (region && region !== \"\") {\r\n        const foundRegion = await atlasFileReader.getRegionByName(region);\r\n        if (foundRegion !== undefined) {\r\n            let regionId = foundRegion.id;\r\n            return await atlasFileReader.getSubRegion(regionId);\r\n        }\r\n    } else {\r\n        raiseError(\"region name is required!\", \"MISSING_REQUIRED_VALUE\")\r\n    }\r\n}\r\n\r\n/**\r\n * This function gives you list of countries with some special information.\r\n *\r\n * @param {boolean} currency do you want currency of country?\r\n * @param {boolean} dialCode do you want dial code of country?\r\n * @param {boolean} native do you want native of country?\r\n * @param {boolean} nationality do you want nationality of country?\r\n * @param {boolean} region do you want region of country?\r\n * @param {boolean} subregion do you want subregion of country?\r\n * @param {boolean} translations do you want translations of country?\r\n * @param {boolean} timezones do you want timezones of country?\r\n * @param {boolean} geolocation do you want geolocation of country?\r\n * @param {boolean} emojies do you want emojies of country?\r\n * @param {boolean} domain do you want domain of country?\r\n * @returns {Promise<object>} A Promise that resolves to an array of countries with some special information if you want.\r\n */\r\nexport async function getAllCountries(\r\n    currency,\r\n    dialCode,\r\n    native,\r\n    nationality,\r\n    region,\r\n    subregion,\r\n    translations,\r\n    timezones,\r\n    geolocation,\r\n    emojies,\r\n    domain\r\n) {\r\n    return await atlasFileReader.getCountries(\r\n        currency,\r\n        dialCode,\r\n        native,\r\n        nationality,\r\n        region,\r\n        subregion,\r\n        translations,\r\n        timezones,\r\n        geolocation,\r\n        emojies,\r\n        domain\r\n    );\r\n}\r\n\r\n/**\r\n * This function gives you states of a country.\r\n *\r\n * @param {string} country country name to get states\r\n * @param {string} iso3 country iso3 to get states\r\n * @param {string} iso2 country iso2 to get states\r\n * @param {boolean} geolocation do you want geolocation of each country state?\r\n * @returns {Promise<object>} A Promise that resolves to an array of country states with some special informations if you want.\r\n */\r\nexport async function getCountryStates(country, iso3, iso2, geolocation) {\r\n    if (\r\n        (country && country !== \"\") ||\r\n        (iso3 && iso3 !== \"\") ||\r\n        (iso2 && iso2 !== \"\")\r\n    ) {\r\n        if (country != null && country != undefined) {\r\n            country = country.toString();\r\n        }\r\n        if (iso3 != null && iso3 !== undefined) {\r\n            iso3 = iso3.toString();\r\n        }\r\n        if (iso2 != null && iso2 != undefined) {\r\n            iso2 = iso2.toString();\r\n        }\r\n        return await atlasFileReader.getStates(\r\n            country,\r\n            iso3,\r\n            iso2,\r\n            geolocation\r\n        );\r\n    } else {\r\n        raiseError(\"country name, iso3 or iso2 is missing, at least one of them is required!\", \"MISSING_REQUIRED_VALUE\")\r\n    }\r\n}\r\n"],"names":["AtlasError","_Error","message","type","tips","data","_this","call","name","_wrapNativeSuper","Error","raiseError","getCountryStates","country","iso3","iso2","geolocation","Promise","resolve","undefined","toString","atlasFileReader","getStates","e","reject","getAllCountries","currency","dialCode","native","nationality","region","subregion","translations","timezones","emojies","domain","getCountries","getSubRegions","getRegionByName","then","foundRegion","getSubRegion","id","getAllRegions","getRegions","AtlasFileReader","_proto","prototype","fsPromises","readFile","JSON","parse","regName","isNaN","Number","_iterator","_step","_createForOfIteratorHelperLoose","done","value","toLowerCase","regionId","subregions","_iterator2","_step2","push","length","countries","_iterator3","_step3","countryObj","countryName","states","_iterator4","_step4","_step5","_iterator5","state","statesObj","country_name"],"mappings":"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"}