{"version":3,"file":"index.umd.js","sources":["../src/extension.js","../src/index.js"],"sourcesContent":["import axios, { isAxiosError } from \"axios\";\r\nimport { promises as fsPromises } from \"fs\";\r\n\r\nexport function sendRequest(url, data = \"{}\", method = \"get\", headers = {}) {\r\n  let config = {\r\n    method: method,\r\n    maxBodyLength: Infinity,\r\n    url: url,\r\n    headers: headers,\r\n    data: data,\r\n  };\r\n\r\n  return axios\r\n    .request(config)\r\n    .then((response) => {\r\n      return response.data;\r\n    })\r\n    .catch((error) => {\r\n      return {\r\n        error: true,\r\n        msg: error,\r\n      };\r\n    });\r\n}\r\n\r\nexport class AtlasFileReader {\r\n  constructor() {}\r\n\r\n  async getRegions() {\r\n    try {\r\n      const data = await fsPromises.readFile(\"./assets/regions.json\", \"utf8\");\r\n      return JSON.parse(data);\r\n    } catch (err) {\r\n      console.error(\"Error reading JSON file:\", err);\r\n      return;\r\n    }\r\n  }\r\n\r\n  async getRegionByName(regName) {\r\n    try {\r\n      if (isNaN(Number(regName))) {\r\n        const data = await fsPromises.readFile(\"./assets/regions.json\", \"utf8\");\r\n        for (const region of JSON.parse(data)) {\r\n          if (region.name.toLowerCase() === regName.toLowerCase()) {\r\n            return region;\r\n          }\r\n        }\r\n        console.error(`Region ${regName} not found`);\r\n        return;\r\n      } else {\r\n        console.error(\"Error finding region: region name can not be Number\");\r\n        return;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error reading JSON file:\", err);\r\n      return;\r\n    }\r\n  }\r\n\r\n  async getSubRegion(regionId) {\r\n    let subregions = [];\r\n    try {\r\n      const data = await fsPromises.readFile(\r\n        \"./assets/subregions.json\",\r\n        \"utf8\"\r\n      );\r\n      for (const subregion of JSON.parse(data)) {\r\n        if (subregion[\"region_id\"] == regionId) {\r\n          subregions.push(subregion);\r\n        }\r\n      }\r\n      if (subregions.length == 0) {\r\n        console.error(`Subregion with region id ${regionId} not found`);\r\n        return;\r\n      } else {\r\n        return subregions;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error reading JSON file:\", err);\r\n      return;\r\n    }\r\n  }\r\n}\r\n","import axios, { isAxiosError } from \"axios\";\r\nimport { sendRequest, AtlasFileReader } from \"./extension.js\";\r\n\r\nconst atlasFileReader = new AtlasFileReader();\r\n\r\n/**\r\n * This function returns and object that contains list of all regions.\r\n *\r\n * @returns {Promise<object>} A Promise that resolves to an array of regions.\r\n */\r\nexport async function getAllRegions() {\r\n  try {\r\n    const regions = await atlasFileReader.getRegions();\r\n    return regions;\r\n  } catch (error) {\r\n    console.error(\"Error getting regions: \", error);\r\n    return;\r\n  }\r\n}\r\n\r\n/**\r\n * This function return subregions of a region.\r\n * \r\n * @param {string} region region name to get subregions.\r\n * @returns {Promise<object>} A Promise that resolves to an array of subregions of entered region.\r\n */\r\nexport async function getSubRegions(region) {\r\n  if (region && region !== \"\") {\r\n    try {\r\n      const findedRegion = await atlasFileReader.getRegionByName(region);\r\n      if (findedRegion != undefined) {\r\n        let regionId = findedRegion.id;\r\n        const subregion = await atlasFileReader.getSubRegion(regionId);\r\n        if (subregion != undefined) {\r\n          return subregion;\r\n        } else {\r\n          return;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error getting subregions: \", error);\r\n      return;\r\n    }\r\n  } else {\r\n    console.error(\"Error getting subregions: region name is required!\");\r\n    return;\r\n  }\r\n}\r\n\r\n/**\r\n * This function fetches data from an API and returns an array of countries.\r\n *\r\n * @param {boolean} flag Need flag of country or not.\r\n * @param {boolean} currency Need currency of country or not.\r\n * @param {boolean} dialCode Need dial code of country or not.\r\n * @returns {Promise<object>} A Promise that resolves to an array of countries fetched from the API.\r\n */\r\nexport async function getAllCountries(flag, currency, dialCode) {\r\n  const moreInfo = [];\r\n  const countries = [];\r\n\r\n  flag && moreInfo.push(\"flag\");\r\n  currency && moreInfo.push(\"currency\");\r\n  dialCode && moreInfo.push(\"dialCode\");\r\n\r\n  let url =\r\n    moreInfo.length > 0\r\n      ? `https://countriesnow.space/api/v0.1/countries/info?returns=${moreInfo.join(\r\n          \",\"\r\n        )}`\r\n      : \"https://countriesnow.space/api/v0.1/countries/positions\";\r\n\r\n  const response = await sendRequest(url);\r\n\r\n  if (!response.error) {\r\n    if (moreInfo.length == 0) {\r\n      for (let country of response.data) {\r\n        countries.push(country[\"name\"]);\r\n      }\r\n      return countries;\r\n    } else {\r\n      return response.data;\r\n    }\r\n  } else {\r\n    return {\r\n      error: true,\r\n      msg: response.msg,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * This function returns an array of country name and capitals.\r\n *\r\n * @param {string} country Country name if you want to get capital of a specific country\r\n * @returns {Promise<object>} A promise that resolves to an array of country name, country capital and iso2&3\r\n */\r\nexport async function getAllCapitals(country) {\r\n  if (country && country !== \"\") {\r\n    let data = JSON.stringify({\r\n      country: country,\r\n    });\r\n    let headers = {\r\n      \"Content-Type\": \"application/json\",\r\n    };\r\n    let url = \"https://countriesnow.space/api/v0.1/countries/capital\";\r\n\r\n    const response = await sendRequest(url, data, \"post\", headers);\r\n\r\n    if (!response.error) {\r\n      return response.data;\r\n    } else {\r\n      if (\r\n        isAxiosError(response.msg) &&\r\n        response.msg.response &&\r\n        response.msg.response.status == 404\r\n      ) {\r\n        return {\r\n          error: true,\r\n          msg: `Country ${country} is not exist!`,\r\n        };\r\n      }\r\n    }\r\n  } else {\r\n    let url = \"https://countriesnow.space/api/v0.1/countries/capital\";\r\n\r\n    const response = await sendRequest(url);\r\n\r\n    if (!response.error) {\r\n      return response.data;\r\n    } else {\r\n      return {\r\n        error: true,\r\n        msg: response.msg,\r\n      };\r\n    }\r\n  }\r\n}\r\n"],"names":["_catch","body","recover","result","e","then","sendRequest","url","data","method","headers","axios","request","maxBodyLength","Infinity","response","error","msg","atlasFileReader","AtlasFileReader","_proto","prototype","getRegions","Promise","resolve","fsPromises","promises","readFile","JSON","parse","err","console","reject","getRegionByName","regName","isNaN","Number","_iterator","_step","_createForOfIteratorHelperLoose","done","region","value","name","toLowerCase","getSubRegion","regionId","subregions","_iterator2","_step2","subregion","push","length","country","stringify","isAxiosError","status","flag","currency","dialCode","moreInfo","countries","join","findedRegion","undefined","id"],"mappings":"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"}