import"axios";import{promises as e}from"fs";function r(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o=function(){return!!e})()}function i(e,r){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},i(e,r)}function u(e){var r="function"==typeof Map?new Map:void 0;return u=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(r){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return function(e,r,t){if(o())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,r);var u=new(e.bind.apply(e,n));return t&&i(u,t.prototype),u}(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},u(e)}var s=/*#__PURE__*/function(e){function r(r,t,n,o){var i;return(i=e.call(this,r)||this).name="AtlasError -> "+t,n&&(i.tips=n),o&&(i.data=o),i}var t,n;return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),r}(/*#__PURE__*/u(Error));function a(e,r,t,n){throw new s(e,r,t,n)}var c=function(e,r,t,n){try{return Promise.resolve(function(){if(e&&""!==e||r&&""!==r||t&&""!==t)return null!=e&&null!=e&&(e=e.toString()),null!=r&&void 0!==r&&(r=r.toString()),null!=t&&null!=t&&(t=t.toString()),Promise.resolve(d.getStates(e,r,t,n));a("country name, iso3 or iso2 is missing, at least one of them is required!","MISSING_REQUIRED_VALUE")}())}catch(e){return Promise.reject(e)}},l=function(e,r,t,n,o,i,u,s,a,c,l){try{return Promise.resolve(d.getCountries(e,r,t,n,o,i,u,s,a,c,l))}catch(e){return Promise.reject(e)}},f=function(e){try{return Promise.resolve(function(){if(e&&""!==e)return Promise.resolve(d.getRegionByName(e)).then(function(e){return function(){if(void 0!==e)return Promise.resolve(d.getSubRegion(e.id))}()});a("region name is required!","MISSING_REQUIRED_VALUE")}())}catch(e){return Promise.reject(e)}},m=function(){try{return Promise.resolve(d.getRegions())}catch(e){return Promise.reject(e)}},d=new(/*#__PURE__*/function(){function r(){}var n=r.prototype;return n.getRegions=function(){try{return Promise.resolve(e.readFile("./assets/regions.json","utf8")).then(JSON.parse)}catch(e){return Promise.reject(e)}},n.getRegionByName=function(r){try{return Promise.resolve(function(){if(isNaN(Number(r)))return Promise.resolve(e.readFile("./assets/regions.json","utf8")).then(function(e){for(var n,o=t(JSON.parse(e));!(n=o()).done;){var i=n.value;if(i.name.toLowerCase()===r.toLowerCase())return i}a("region "+r+" not found","RESULT_NOT_FOUND")});a("region name must be string","INPUT_TYPE_ERR")}())}catch(e){return Promise.reject(e)}},n.getSubRegion=function(r){try{var n=[];return Promise.resolve(e.readFile("./assets/subregions.json","utf8")).then(function(e){for(var o,i=t(JSON.parse(e));!(o=i()).done;){var u=o.value;u.region_id==r&&n.push(u)}if(0!==n.length)return n;a("Subregion with region id "+r+" not found","RESULT_NOT_FOUND")})}catch(e){return Promise.reject(e)}},n.getCountries=function(r,n,o,i,u,s,a,c,l,f,m){try{var d=[];return Promise.resolve(e.readFile("./assets/countries_states_cities.json","utf8")).then(function(e){for(var v,p=t(JSON.parse(e));!(v=p()).done;){var y=v.value,g={};g.id=y.id,g.name=y.name,g.iso2=y.iso2,g.iso3=y.iso3,g.capital=y.capital,n&&(g.phone_code=y.phone_code),r&&(g.currency=y.currency,g.currency_name=y.currency_name,g.currency_symbol=y.currency_symbol),m&&(g.domain=y.tld),o&&(g.native=y.native),i&&(g.nationality=y.nationality),u&&(g.region=y.region,g.region_id=y.region_id),s&&(g.subregion=y.subregion,g.subregion_id=y.subregion_id),a&&(g.translations=y.translations),c&&(g.timezones=y.timezones),l&&(g.latitude=y.latitude,g.longitude=y.longitude),f&&(g.emoji=y.emoji,g.emojiU=y.emojiU),d.push(g)}return d})}catch(e){return Promise.reject(e)}},n.getStates=function(r,n,o,i){try{return Promise.resolve(function(){if(void 0!==r&&null!=r&&isNaN(Number(r))||void 0!==n&&isNaN(Number(n))||void 0!==o&&isNaN(Number(o))){var u=[];return Promise.resolve(e.readFile("./assets/countries_states_cities.json","utf8")).then(function(e){for(var s,c=t(JSON.parse(e));!(s=c()).done;){var l=s.value;if(void 0!==r&&null!=r&&l.name.toLowerCase()===r.toLowerCase()||void 0!==n&&l.iso3.toLowerCase()===n.toLowerCase()||void 0!==o&&l.iso2.toLowerCase()===o.toLowerCase())for(var f,m=t(l.states);!(f=m()).done;){var d=f.value,v={};v.id=d.id,v.name=d.name,v.state_code=d.state_code,i&&(v.latitude=d.latitude,v.longitude=d.longitude),u.push(v)}}if(0!==u.length)return u;a("Country "+r+" not found","RESULT_NOT_FOUND",{country_name:"check entered country name: "+r,iso3:"check entered iso3: "+n,iso2:"check entered iso2: "+o})})}a("region name must be string","INPUT_TYPE_ERR")}())}catch(e){return Promise.reject(e)}},r}());export{l as getAllCountries,m as getAllRegions,c as getCountryStates,f as getSubRegions};
//# sourceMappingURL=index.esm.js.map
